C51 COMPILER V8.18   LEDLED                                                                01/06/2010 20:53:07 PAGE 1   


C51 COMPILER V8.18, COMPILATION OF MODULE LEDLED
OBJECT MODULE PLACED IN LEDLED.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE LEDLED.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include <AT89X51.h>  //头文件
   2          rzmzy(); //红色走马左移声明
   3          rlszy(); //红色流水左移声明
   4          rlsyy(); //红色流水右移声明
   5          rzmyy(); //红色走马右移声明
   6          rzmnwyd(); //红色走马内外移动声明
   7          rlsnwyd(); //红色流水内外移动声明
   8          rtbyd(); //红色跳变移动声明
   9          rsdzmyy(); //红色3灯走马右移声明
  10          rsdzmzy(); //红色3灯走马左移声明
  11          rjl();     //红色渐亮声明
  12          rja();     //红色渐暗声明
  13          rdlszy();       //倒流水左移函数
  14          //rdlsyy();     //倒流水右移函数，还未加入
  15          zkb(unsigned char d);
  16          void ys1ms(unsigned int s);      //延时声明，修改s的数值，就可以改变时间
  17          main() //主函数，由于模块化设计，只要修改下面各模块的排列顺序和时间，就可以实现各种变化模式
  18          {
  19   1              EA=1;//打开中断,使用中断方便调试查看模式
  20   1              EX0=1; //允许外部中断0中断
  21   1              EX1=1; //允许外部中断1中断
  22   1              PX0=1; // 外部中断0位高优先级
  23   1              while(1)  //无限循环
  24   1              {
  25   2               rdlszy(); //倒流水左移
  26   2               rja();    //渐暗
  27   2               P0=0xff;
  28   2               ys1ms(300); //延时0.3秒
  29   2               //rdlsyy(); // 倒流水右移
  30   2               //P0=0xff;
  31   2               //ys1ms(300);
  32   2               rzmyy(); //走马右移
  33   2               P0=0xff;
  34   2               ys1ms(300);     
  35   2               rzmzy(); //走马左移
  36   2               P0=0xff;
  37   2               ys1ms(300);
  38   2               rjl();  //渐亮
  39   2               rja();  //渐暗
  40   2               P0=0xff;
  41   2               ys1ms(300);
  42   2               rzmnwyd(); //走马内外移动
  43   2               P0=0xff;
  44   2               ys1ms(300);
  45   2               rlszy(); //流水左移
  46   2               rja();  //渐暗
  47   2               ys1ms(300);
  48   2               rlsyy(); //流水右移
  49   2               rja();  //渐暗
  50   2               ys1ms(300);
  51   2               rsdzmyy(); //3灯走马右移
  52   2               P0=0xff;
  53   2               ys1ms(300);
  54   2               rsdzmzy(); //3灯走马右移
  55   2               P0=0xff;
C51 COMPILER V8.18   LEDLED                                                                01/06/2010 20:53:07 PAGE 2   

  56   2               ys1ms(300);             
  57   2               rlsnwyd(); //流水内外移动
  58   2               P0=0xff;
  59   2               ys1ms(300);
  60   2               rtbyd(); //跳变7种模式
  61   2               P0=0xff;
  62   2               ys1ms(300);
  63   2              }
  64   1      }
  65          rzmyy()  //走马拖尾右移函数
  66          { 
  67   1               P0=0x7f;
  68   1               ys1ms(60);
  69   1               P0=0xbf;
  70   1               if(P0_7==1)
  71   1               {
  72   2                  unsigned int a;
  73   2                              for(a=0;a<350;a++)      //调节点亮时间
  74   2                              {
  75   3                              unsigned char i;
  76   3                              P0_7 = 0;
  77   3                              for(i = 0; i < 15; i++);  //调节亮度高低
  78   3                  P0_7 = 1;
  79   3                      for(i = 0; i < 50; i++); 
  80   3                              }
  81   2               }
  82   1               P0=0xdf;
  83   1              if(P0_6==1)
  84   1               {
  85   2                  unsigned int a;
  86   2                              for(a=0;a<350;a++)      //调节点亮时间
  87   2                              {
  88   3                              unsigned char i;
  89   3                              P0_6 = 0;
  90   3                              for(i = 0; i < 15; i++);  //调节亮度高低
  91   3                              P0_7 = 0;
  92   3                              for(i = 0; i < 1; i++);  //调节亮度高低
  93   3                  P0_6 = 1;
  94   3                              P0_7 = 1;
  95   3                      for(i = 0; i < 50; i++); 
  96   3                              }
  97   2                      }
  98   1               P0=0xef;
  99   1              if(P0_5==1)
 100   1               {
 101   2                  unsigned int a;
 102   2                              for(a=0;a<350;a++)      //调节点亮时间
 103   2                              {
 104   3                              unsigned char i;
 105   3                              P0_5 = 0;
 106   3                              for(i = 0; i < 15; i++);  //调节亮度高低
 107   3                              P0_6 = 0;
 108   3                              for(i = 0; i < 1; i++);  //调节亮度高低
 109   3                  P0_5 = 1;
 110   3                              P0_6 = 1;
 111   3                      for(i = 0; i < 50; i++); 
 112   3                              }
 113   2                      }
 114   1               P0=0xf7;
 115   1              if(P0_4==1)
 116   1               {
 117   2                  unsigned int a;
C51 COMPILER V8.18   LEDLED                                                                01/06/2010 20:53:07 PAGE 3   

 118   2                              for(a=0;a<350;a++)      //调节点亮时间
 119   2                              {
 120   3                              unsigned char i;
 121   3                              P0_4 = 0;
 122   3                              for(i = 0; i < 15; i++);  //调节亮度高低
 123   3                              P0_5 = 0;
 124   3                              for(i = 0; i < 1; i++);  //调节亮度高低
 125   3                  P0_4 = 1;
 126   3                              P0_5 = 1;
 127   3                      for(i = 0; i < 50; i++); 
 128   3                              }
 129   2                      }
 130   1               P0=0xfb;
 131   1              if(P0_3==1)
 132   1               {
 133   2                  unsigned int a;
 134   2                              for(a=0;a<350;a++)      //调节点亮时间
 135   2                              {
 136   3                              unsigned char i;
 137   3                              P0_3 = 0;
 138   3                              for(i = 0; i < 15; i++);  //调节亮度高低
 139   3                              P0_4 = 0;
 140   3                              for(i = 0; i < 1; i++);  //调节亮度高低
 141   3                  P0_3 = 1;
 142   3                              P0_4 = 1;
 143   3                      for(i = 0; i < 50; i++); 
 144   3                              }
 145   2                      }
 146   1               P0=0xfd;
 147   1              if(P0_2==1)
 148   1               {
 149   2                  unsigned int a;
 150   2                              for(a=0;a<350;a++)      //调节点亮时间
 151   2                              {
 152   3                              unsigned char i;
 153   3                              P0_2 = 0;
 154   3                              for(i = 0; i < 15; i++);  //调节亮度高低
 155   3                              P0_3 = 0;
 156   3                              for(i = 0; i < 1; i++);  //调节亮度高低
 157   3                  P0_2 = 1;
 158   3                              P0_3 = 1;
 159   3                      for(i = 0; i < 50; i++); 
 160   3                              }
 161   2                      }
 162   1               P0=0xfe;
 163   1              if(P0_1==1)
 164   1               {
 165   2                  unsigned int a;
 166   2                              for(a=0;a<350;a++)      //调节点亮时间
 167   2                              {
 168   3                              unsigned char i;
 169   3                              P0_1 = 0;
 170   3                              for(i = 0; i < 15; i++);  //调节亮度高低
 171   3                              P0_2 = 0;
 172   3                              for(i = 0; i < 1; i++);  //调节亮度高低
 173   3                  P0_1 = 1;
 174   3                              P0_2 = 1;
 175   3                      for(i = 0; i < 50; i++); 
 176   3                              }
 177   2                      }
 178   1               P0=0xff;
 179   1               if(P0_0==1)
C51 COMPILER V8.18   LEDLED                                                                01/06/2010 20:53:07 PAGE 4   

 180   1               {
 181   2                  unsigned int a;
 182   2                              for(a=0;a<350;a++)      //调节点亮时间
 183   2                              {
 184   3                              unsigned char i;
 185   3                              P0_0 = 0;
 186   3                              for(i = 0; i < 15; i++);  //调节亮度高低
 187   3                              P0_1 = 0;
 188   3                              for(i = 0; i < 1; i++);  //调节亮度高低
 189   3                  P0_0 = 1;
 190   3                              P0_1 = 1;
 191   3                      for(i = 0; i < 50; i++); 
 192   3                              }
 193   2                      }
 194   1              if(P0_7==1)
 195   1               {
 196   2                  unsigned int a;
 197   2                              for(a=0;a<350;a++)      //调节点亮时间
 198   2                              {
 199   3                              unsigned char i;
 200   3                              P0_0 = 0;
 201   3                              for(i = 0; i < 1; i++);  //调节亮度高低
 202   3                  P0_0 = 1;
 203   3                      for(i = 0; i < 50; i++); 
 204   3                              }
 205   2              }               
 206   1      }
 207          /****************************************************************************/
 208          rzmzy()  //走马拖尾左移函数
 209          {
 210   1               P0=0xfe;
 211   1               ys1ms(60);
 212   1               P0=0xfd;
 213   1               if(P0_0==1)
 214   1               {
 215   2                  unsigned int a;
 216   2                              for(a=0;a<350;a++)      //调节点亮时间
 217   2                              {
 218   3                              unsigned char i;
 219   3                              P0_0 = 0;
 220   3                              for(i = 0; i < 10; i++);  //调节亮度高低
 221   3                  P0_0 = 1;
 222   3                      for(i = 0; i < 50; i++); 
 223   3                              }
 224   2              }               
 225   1               P0=0xfb;
 226   1               if(P0_1==1)
 227   1               {
 228   2                  unsigned int a;
 229   2                              for(a=0;a<350;a++)      //调节点亮时间
 230   2                              {
 231   3                              unsigned char i;
 232   3                              P0_1 = 0;
 233   3                              for(i = 0; i < 15; i++);  //调节亮度高低
 234   3                              P0_0 = 0;
 235   3                              for(i = 0; i < 1; i++);  //调节亮度高低
 236   3                  P0_1 = 1;
 237   3                              P0_0 = 1;
 238   3                      for(i = 0; i < 50; i++); 
 239   3                              }
 240   2                      }
 241   1               P0=0xf7;
C51 COMPILER V8.18   LEDLED                                                                01/06/2010 20:53:07 PAGE 5   

 242   1               if(P0_2==1)
 243   1               {
 244   2                  unsigned int a;
 245   2                              for(a=0;a<350;a++)      //调节点亮时间
 246   2                              {
 247   3                              unsigned char i;
 248   3                              P0_2 = 0;
 249   3                              for(i = 0; i < 15; i++);  //调节亮度高低
 250   3                              P0_1 = 0;
 251   3                              for(i = 0; i < 1; i++);  //调节亮度高低
 252   3                  P0_2 = 1;
 253   3                              P0_1 = 1;
 254   3                      for(i = 0; i < 50; i++); 
 255   3                              }
 256   2                      }
 257   1               P0=0xef;
 258   1               if(P0_3==1)
 259   1               {
 260   2                  unsigned int a;
 261   2                              for(a=0;a<350;a++)      //调节点亮时间
 262   2                              {
 263   3                              unsigned char i;
 264   3                              P0_3 = 0;
 265   3                              for(i = 0; i < 15; i++);  //调节亮度高低
 266   3                              P0_2 = 0;
 267   3                              for(i = 0; i < 1; i++);  //调节亮度高低
 268   3                  P0_3 = 1;
 269   3                              P0_2 = 1;
 270   3                      for(i = 0; i < 50; i++); 
 271   3                              }
 272   2                      }
 273   1               P0=0xdf;
 274   1               if(P0_4==1)
 275   1               {
 276   2                  unsigned int a;
 277   2                              for(a=0;a<350;a++)      //调节点亮时间
 278   2                              {
 279   3                              unsigned char i;
 280   3                              P0_4 = 0;
 281   3                              for(i = 0; i < 15; i++);  //调节亮度高低
 282   3                              P0_3 = 0;
 283   3                              for(i = 0; i < 1; i++);  //调节亮度高低
 284   3                  P0_4 = 1;
 285   3                              P0_3 = 1;
 286   3                      for(i = 0; i < 50; i++); 
 287   3                              }
 288   2                      }
 289   1               P0=0xbf;
 290   1               if(P0_5==1)
 291   1               {
 292   2                  unsigned int a;
 293   2                              for(a=0;a<350;a++)      //调节点亮时间
 294   2                              {
 295   3                              unsigned char i;
 296   3                              P0_5 = 0;
 297   3                              for(i = 0; i < 15; i++);  //调节亮度高低
 298   3                              P0_4 = 0;
 299   3                              for(i = 0; i < 1; i++);  //调节亮度高低
 300   3                  P0_5 = 1;
 301   3                              P0_4 = 1;
 302   3                      for(i = 0; i < 50; i++); 
 303   3                              }
C51 COMPILER V8.18   LEDLED                                                                01/06/2010 20:53:07 PAGE 6   

 304   2                      }
 305   1               P0=0x7f;
 306   1               if(P0_6==1)
 307   1               {
 308   2                  unsigned int a;
 309   2                              for(a=0;a<350;a++)      //调节点亮时间
 310   2                              {
 311   3                              unsigned char i;
 312   3                              P0_6 = 0;
 313   3                              for(i = 0; i < 15; i++);  //调节亮度高低
 314   3                              P0_5 = 0;
 315   3                              for(i = 0; i < 1; i++);  //调节亮度高低
 316   3                  P0_6 = 1;
 317   3                              P0_5 = 1;
 318   3                      for(i = 0; i < 50; i++); 
 319   3                              }
 320   2                      }
 321   1               P0=0xff;
 322   1               if(P0_7==1)
 323   1               {
 324   2                  unsigned int a;
 325   2                              for(a=0;a<350;a++)      //调节点亮时间
 326   2                              {
 327   3                              unsigned char i;
 328   3                              P0_7 = 0;
 329   3                              for(i = 0; i < 15; i++);  //调节亮度高低
 330   3                              P0_6 = 0;
 331   3                              for(i = 0; i < 1; i++);  //调节亮度高低
 332   3                  P0_7 = 1;
 333   3                              P0_6 = 1;
 334   3                      for(i = 0; i < 50; i++); 
 335   3                              }
 336   2                      }
 337   1              if(P0_0==1)
 338   1               {
 339   2                  unsigned int a;
 340   2                              for(a=0;a<350;a++)      //调节点亮时间
 341   2                              {
 342   3                              unsigned char i;
 343   3                              P0_7 = 0;
 344   3                              for(i = 0; i < 1; i++);  //调节亮度高低
 345   3                  P0_7 = 1;
 346   3                      for(i = 0; i < 50; i++); 
 347   3                              }
 348   2              }                       
 349   1      }
 350          /****************************************************************************/
 351          rlszy() //流水左移函数
 352          {
 353   1              unsigned char  a,i,led; //声明无字符整形变量a,i,led
 354   1              led=0xfe; //左移初始值定位
 355   1              P0=led;  //输出
 356   1              ys1ms(120); //延时
 357   1              for(i=1;i<8;i++) //设置移动7次
 358   1              {
 359   2                      a=led<<i;//灯左移i位
 360   2                      P0=a; //依次点亮
 361   2                      ys1ms(120);
 362   2              }       
 363   1      }
 364          /***************************************************************************/
 365          rlsyy() //流水右移函数
C51 COMPILER V8.18   LEDLED                                                                01/06/2010 20:53:07 PAGE 7   

 366          {
 367   1              unsigned char  a,i,led; //声明无字符整形变量a,i,led
 368   1              led=0x7f; //左移初始值定位
 369   1              P0=led;  //输出
 370   1              ys1ms(120); //延时
 371   1              for(i=1;i<8;i++) //设置移动7次
 372   1              {
 373   2                      a=led>>i;//灯右移i位
 374   2                      P0=a; //依次点亮
 375   2                      ys1ms(120);
 376   2              }       
 377   1      }
 378          /***************************************************************************/
 379          rdlszy()        //倒流水左移函数
 380          {
 381   1               P0=0xfe;
 382   1               ys1ms(60);
 383   1               P0=0xfd;
 384   1               ys1ms(60);
 385   1               P0=0xfb;
 386   1               ys1ms(60);
 387   1               P0=0xf7;
 388   1               ys1ms(60);
 389   1               P0=0xef;
 390   1               ys1ms(60);
 391   1               P0=0xdf;
 392   1               ys1ms(60);
 393   1               P0=0xbf;
 394   1               ys1ms(60);
 395   1               P0=0x7f;
 396   1               ys1ms(60);
 397   1      
 398   1               P0=0x7e;
 399   1               ys1ms(60);
 400   1               P0=0x7d;
 401   1               ys1ms(60);
 402   1               P0=0x7b;
 403   1               ys1ms(60);
 404   1               P0=0x6f;
 405   1               ys1ms(60);
 406   1               P0=0x5f;
 407   1               ys1ms(60);
 408   1               P0=0x3f;
 409   1               ys1ms(60);      
 410   1      
 411   1               P0=0x3d;
 412   1               ys1ms(60);
 413   1               P0=0x3b;
 414   1               ys1ms(60);
 415   1               P0=0x37;
 416   1               ys1ms(60);
 417   1               P0=0x2f;
 418   1               ys1ms(60);
 419   1               P0=0x1f;
 420   1               ys1ms(60);
 421   1      
 422   1               P0=0x1e;
 423   1               ys1ms(60);
 424   1               P0=0x1d;
 425   1               ys1ms(60);
 426   1               P0=0x1b;
 427   1               ys1ms(60);
C51 COMPILER V8.18   LEDLED                                                                01/06/2010 20:53:07 PAGE 8   

 428   1               P0=0x17;
 429   1               ys1ms(60);
 430   1               P0=0x0f;
 431   1               ys1ms(60);
 432   1      
 433   1               P0=0x0e;
 434   1               ys1ms(60);
 435   1               P0=0x0d;
 436   1               ys1ms(60);
 437   1               P0=0x0b;
 438   1               ys1ms(60);
 439   1               P0=0x07;
 440   1               ys1ms(60);
 441   1      
 442   1               P0=0x06;
 443   1               ys1ms(60);
 444   1               P0=0x05;
 445   1               ys1ms(60);
 446   1               P0=0x04;
 447   1               ys1ms(60);
 448   1               P0=0x03;
 449   1               ys1ms(60);
 450   1      
 451   1               P0=0x02;
 452   1               ys1ms(60);
 453   1               P0=0x01;
 454   1               ys1ms(60);
 455   1               P0=0x00;
 456   1      
 457   1      }
 458          /***************************************************************************
 459          rdlsyy()        //倒流水右移函数,参考上面左移
 460          {
 461                  
 462          }
 463          /***************************************************************************/
 464          rsdzmyy()  //3灯走马右移函数 ，可以参考单灯走马加入拖尾
 465          {
 466   1               P0=0x1f;
 467   1               ys1ms(60);
 468   1               P0=0x8f;
 469   1               ys1ms(60);
 470   1               P0=0xc7;
 471   1               ys1ms(60);
 472   1               P0=0xe3;
 473   1               ys1ms(60);
 474   1               P0=0xf1;
 475   1               ys1ms(60);
 476   1               P0=0xf8;
 477   1               ys1ms(60);
 478   1               P0=0xfc;
 479   1               ys1ms(60);
 480   1               P0=0xfe;
 481   1               ys1ms(60);
 482   1               P0=0xff;               
 483   1      }
 484          /****************************************************************************/
 485          rsdzmzy()  //3灯走马左移函数， 可以参考单灯走马加入拖尾
 486          {
 487   1               P0=0xf8;
 488   1               ys1ms(60);
 489   1               P0=0xf1;
C51 COMPILER V8.18   LEDLED                                                                01/06/2010 20:53:07 PAGE 9   

 490   1               ys1ms(60);
 491   1               P0=0xe3;
 492   1               ys1ms(60);
 493   1               P0=0xc7;
 494   1               ys1ms(60);
 495   1               P0=0x8f;
 496   1               ys1ms(60);
 497   1               P0=0x1f;
 498   1               ys1ms(60);
 499   1               P0=0x3f;
 500   1               ys1ms(60);
 501   1               P0=0x7f;
 502   1               ys1ms(60);
 503   1               P0=0xff;               
 504   1      }
 505          /****************************************************************************/
 506          rzmnwyd()  //走马内外移动函数
 507          {        
 508   1               P0=0x7e;//
 509   1               ys1ms(90);
 510   1               P0=0xbd;
 511   1               ys1ms(90);
 512   1               P0=0xdb;
 513   1               ys1ms(90);
 514   1               P0=0xe7;
 515   1               ys1ms(90);
 516   1               P0=0xff;
 517   1               ys1ms(300);
 518   1               P0=0xe7;
 519   1               ys1ms(90);
 520   1               P0=0xdb;
 521   1               ys1ms(90);
 522   1               P0=0xbd;
 523   1               ys1ms(90);
 524   1               P0=0x7e;
 525   1               ys1ms(90);
 526   1               P0=0xff;
 527   1      }
 528          /****************************************************************************/
 529          rlsnwyd()  //红色流水内外移动函数
 530          {        
 531   1               P0=0xe7;//
 532   1               ys1ms(90);
 533   1               P0=0xc3;
 534   1               ys1ms(90);
 535   1               P0=0x81;
 536   1               ys1ms(90);
 537   1               P0=0x00;
 538   1               rja();
 539   1               ys1ms(300);
 540   1               P0=0x7e;
 541   1               ys1ms(90);
 542   1               P0=0x3c;
 543   1               ys1ms(90);
 544   1               P0=0x18;
 545   1               ys1ms(90);
 546   1               P0=0x00;
 547   1               rja();
 548   1      }
 549          /****************************************************************************/
 550          rtbyd()  //红色跳变8模式移动函数
 551          {        
C51 COMPILER V8.18   LEDLED                                                                01/06/2010 20:53:07 PAGE 10  

 552   1               P0=0x1f;
 553   1               ys1ms(180);
 554   1               P0=0xff;
 555   1               ys1ms(120);
 556   1               P0=0xf8;
 557   1               ys1ms(180);
 558   1               P0=0xff;
 559   1               ys1ms(120);
 560   1               P0=0xe7;
 561   1               ys1ms(180);
 562   1               P0=0xff;
 563   1               ys1ms(300);
 564   1      /****************************************************************************/
 565   1               P0=0xfc;
 566   1               ys1ms(180);
 567   1               P0=0xff;
 568   1               ys1ms(120);
 569   1               P0=0x3f;
 570   1               ys1ms(180);
 571   1               P0=0xff;
 572   1               ys1ms(300);
 573   1      /****************************************************************************/
 574   1               P0=0x3c;
 575   1               ys1ms(180);
 576   1               P0=0xff;
 577   1               ys1ms(120);
 578   1               P0=0x3c;
 579   1               ys1ms(180);
 580   1               P0=0xff;
 581   1               ys1ms(300);
 582   1      /****************************************************************************/
 583   1               P0=0xc3;
 584   1               ys1ms(120);
 585   1               P0=0xff;
 586   1               ys1ms(120);
 587   1               P0=0xc3;
 588   1               ys1ms(120);
 589   1               P0=0xff;
 590   1               ys1ms(120);
 591   1      /****************************************************************************/
 592   1               P0=0xf0;
 593   1               ys1ms(180);
 594   1               P0=0xff;
 595   1               ys1ms(120);
 596   1               P0=0xf0;
 597   1               ys1ms(180);
 598   1               P0=0xff;
 599   1               ys1ms(300);
 600   1      /****************************************************************************/
 601   1               P0=0xc3;
 602   1               ys1ms(180);
 603   1               P0=0xff;
 604   1               ys1ms(120);
 605   1               P0=0xc3;
 606   1               ys1ms(300);
 607   1      /****************************************************************************/
 608   1               P0=0x0f;
 609   1               ys1ms(180);
 610   1               P0=0xff;
 611   1               ys1ms(120);
 612   1               P0=0x0f;
 613   1               ys1ms(180);
C51 COMPILER V8.18   LEDLED                                                                01/06/2010 20:53:07 PAGE 11  

 614   1               P0=0xff;
 615   1               ys1ms(300);
 616   1      /****************************************************************************/
 617   1               rjl();  
 618   1               P0=0x00;
 619   1               ys1ms(100);
 620   1               P0=0xff;
 621   1               ys1ms(35);
 622   1               P0=0x00;
 623   1               ys1ms(100);
 624   1               P0=0xff;
 625   1               ys1ms(35);
 626   1               P0=0x00;
 627   1               ys1ms(100);
 628   1               P0=0xff;
 629   1               ys1ms(35);
 630   1               P0=0x00;
 631   1               ys1ms(100);
 632   1               P0=0xff;
 633   1               ys1ms(35);
 634   1               P0=0x00;
 635   1               ys1ms(100);
 636   1               P0=0xff;
 637   1               ys1ms(35);
 638   1               rja();  
 639   1               ys1ms(180);
 640   1               P0=0xff;
 641   1      }
 642          /**************单片机晶振为11.0592兆的1毫秒延时*************************/
 643           void ys1ms(unsigned int s)        //定时器精确延时1毫秒函数，改变S数值即改变时间
 644           {
 645   1              TR0=1;
 646   1              while(s!=0)
 647   1              {
 648   2                      TH0=-(7629/256);
 649   2                      TL0=-(7629%256);
 650   2                      while(TF0!=1);
 651   2                      TF0=0;
 652   2                      s--;
 653   2              }
 654   1              TR0=0;
 655   1       }
 656           /*****************************************************************************
 657          int0_srv() interrupt 0 using 2   //外中断函数
 658          {
 659                  unsigned char n,m;       //声明无字符整形变量a和b
 660                  unsigned int i;         //声明无字符整形变量i
 661                  for(i=0;i<5000;i++);  //延时50毫秒，防抖动
 662                  if (INT0==0)              //暂停
 663                  {
 664                          n=P0;                     //保留状态
 665                          m=P2;
 666                          P3=0xfb;                  //保持暂停状态
 667                  }
 668                  if(INT1==0)                       //继续运行
 669                  {
 670                          P3=0xff;                  //释放暂停状态
 671                          P0=n;                     //恢复运行
 672                          P2=m;
 673                  }
 674          }
 675          /****************************************************************************/
C51 COMPILER V8.18   LEDLED                                                                01/06/2010 20:53:07 PAGE 12  

 676          rjl()  //渐亮函数 
 677          {   
 678   1          unsigned char a, b;//a控制延时长度　b控制循环周期      
 679   1              P0 = 0xff;
 680   1          a = 0;   
 681   1          for (b=250; b>0; b--)   //循环周期设置
 682   1              {   
 683   2                  a++;   
 684   2                  zkb (a);      //延时长度随a而改变    
 685   2                  P0 = 0xff;
 686   2                  a = ~a;         //a值取反，决定灯灭时的占空比    
 687   2                  zkb (a);   
 688   2                  P0 = 0x00;
 689   2                      a = ~a;         //a值取反　使a回到原值继续循环 
 690   2               }
 691   1       }
 692          /****************************************************************************/
 693          rja()  //渐暗函数
 694          {
 695   1              unsigned char a, b;//a控制延时长度　b控制循环周期    
 696   1          P0 = 0x00;            //亮起LED 
 697   1              a = 0;   
 698   1              for (b=250; b>0; b--)   
 699   1              {   
 700   2                  a++;   
 701   2                  zkb (a);   
 702   2                  P0 = 0x00;
 703   2                      a = ~a;   
 704   2                  zkb (a);   
 705   2                  P0 = 0xff;   
 706   2                      a = ~a;   
 707   2              }
 708   1      }
 709          /****************************************************************************/
 710          zkb(unsigned char d)   //占空比函数，由d决定延时长度    
 711          {      
 712   1          unsigned char i;   
 713   1          while( --d != 0)   
 714   1          {   
 715   2              for(i = 0; i < 1; i++);   //占空比时间设置
 716   2          }                         
 717   1      } 
 718          /****************************************************************************/  
*** WARNING C290 IN LINE 206 OF LEDLED.C: missing return value
*** WARNING C290 IN LINE 349 OF LEDLED.C: missing return value
*** WARNING C290 IN LINE 363 OF LEDLED.C: missing return value
*** WARNING C290 IN LINE 377 OF LEDLED.C: missing return value
*** WARNING C290 IN LINE 457 OF LEDLED.C: missing return value
*** WARNING C290 IN LINE 483 OF LEDLED.C: missing return value
*** WARNING C290 IN LINE 504 OF LEDLED.C: missing return value
*** WARNING C290 IN LINE 527 OF LEDLED.C: missing return value
*** WARNING C290 IN LINE 548 OF LEDLED.C: missing return value
*** WARNING C290 IN LINE 641 OF LEDLED.C: missing return value
*** WARNING C290 IN LINE 691 OF LEDLED.C: missing return value
*** WARNING C290 IN LINE 708 OF LEDLED.C: missing return value
*** WARNING C290 IN LINE 717 OF LEDLED.C: missing return value


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   2395    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
C51 COMPILER V8.18   LEDLED                                                                01/06/2010 20:53:07 PAGE 13  

   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      16
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  13 WARNING(S),  0 ERROR(S)
